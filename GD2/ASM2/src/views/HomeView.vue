<template>
    <!-- carousel -->
    <div id="carouselExampleIndicators" class="carousel slide">
      
      
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                    aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                    aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                    aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="../assets/img/website-tin-tuc-bao-dien-tu-online-phu-hop-voi-nhung-don-vi-nao.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="../assets/img/chuc-nang-thong-ke-tren-web-bao-chi-.jpg" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="../assets/img/thiet-ke-website-tin-tuc-bao-dien-tu-co-he-thong-quan-ly-noi-dung-cms.jpg" class="d-block w-100" alt="...">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
        <br> <br>
        <div class="container my-2">
  <div class="alert alert-danger d-flex align-items-center py-1 px-2 shadow-sm small bg-success" role="alert">
    
    <strong class="me-2 text-nowrap">üî¥ TIN N√ìNG</strong>
    
    <marquee class="fw-normal">
      Vue 3 ch√≠nh th·ª©c ra m·∫Øt b·∫£n c·∫≠p nh·∫≠t m·ªõi ‚Ä¢ Bootstrap 5.4 s·∫Øp ph√°t h√†nh ‚Ä¢ Xu h∆∞·ªõng Frontend 2025
    </marquee>
    
  </div>
</div>

        

<div class="container my-5">
  <h4 class="mb-4 border-start border-4 border-primary ps-3">
    C√¥ng ngh·ªá
  </h4>

  <div class="row">
    <div class="col-md-6">
      <div class="card mb-3 shadow-sm">
        <img src="../assets/img/banner1.jpg" class="card-img-top" style="height: 220px; object-fit: cover;">
        <div class="card-body">
          <h5 class="fw-bold">Xu h∆∞·ªõng Frontend 2025</h5>
          <p class="small text-muted">5 ph√∫t ƒë·ªçc ‚Ä¢ 1.2k l∆∞·ª£t xem</p>
          <p class="mb-2">Frontend ƒëang thay ƒë·ªïi r·∫•t nhanh v·ªõi AI, Web Components...</p>
          <button class="btn btn-sm btn-outline-primary">Xem chi ti·∫øt</button>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          Vue 3 ti·∫øp t·ª•c th·ªëng tr·ªã th·ªã tr∆∞·ªùng SPA
        </li>
        <li class="list-group-item">
          Bootstrap 5 c√≥ c√≤n ph√π h·ª£p nƒÉm 2025?
        </li>
        <li class="list-group-item">
          Backend Java & t∆∞∆°ng lai Microservices
        </li>
        <li class="list-group-item">
          Fullstack Developer c·∫ßn h·ªçc g√¨?
        </li>
      </ul>
    </div>
  </div>
</div>


 
<!-- Ch·ªß ƒë·ªÅ n·ªïi b·∫≠t-->
     <div class="container my-5">
  <h4 class="mb-3">Ch·ªß ƒë·ªÅ n·ªïi b·∫≠t</h4>
  <div class="d-flex flex-wrap gap-2">
    <span class="badge bg-primary fs-6">VueJS</span>
    <span class="badge bg-success fs-6">Java</span>
    <span class="badge bg-warning text-dark fs-6">Bootstrap</span>
    <span class="badge bg-info text-dark fs-6">Frontend</span>
    <span class="badge bg-danger fs-6">Backend</span>
  </div>
</div>

<!-- B√†i vi·∫øt ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t -->
<div class="container my-5">
  <h4 class="mb-4">üî• B√†i vi·∫øt ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t:</h4>

  <div class="row g-3">
    <div class="col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="../assets/img/banner1.jpg" class="card-img-top" style="height: 150px; object-fit: cover;">
        <div class="card-body">
          <h6 class="card-title">Vue Router c∆° b·∫£n</h6>
          <p class="small text-muted mb-2">1.2k l∆∞·ª£t xem</p>
          <button class="btn btn-sm btn-outline-primary">Xem</button>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="../assets/img/banner2.jpg" class="card-img-top" style="height: 150px; object-fit: cover;">
        <div class="card-body">
          <h6 class="card-title">Composition API</h6>
          <p class="small text-muted mb-2">980 l∆∞·ª£t xem</p>
          <button class="btn btn-sm btn-outline-primary">Xem</button>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="../assets/img/banner3.jpg" class="card-img-top" style="height: 150px; object-fit: cover;">
        <div class="card-body">
          <h6 class="card-title">Pinia Store</h6>
          <p class="small text-muted mb-2">860 l∆∞·ª£t xem</p>
          <button class="btn btn-sm btn-outline-primary">Xem</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container my-5">
  <h4 class="mb-4">üë®‚Äçüíª T√°c gi·∫£ n·ªïi b·∫≠t</h4>

  <div class="row g-3">
    <div class="col-md-4">
      <div class="card text-center shadow-sm h-100">
        <div class="card-body">
          <img src="https://i.pravatar.cc/100?img=1" class="rounded-circle mb-3">
          <h6 class="fw-bold mb-1">Nguy·ªÖn VƒÉn A</h6>
          <p class="small text-muted">VueJS, Frontend</p>
          <button class="btn btn-sm btn-outline-primary">Xem b√†i vi·∫øt</button>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card text-center shadow-sm h-100">
        <div class="card-body">
          <img src="https://i.pravatar.cc/100?img=2" class="rounded-circle mb-3">
          <h6 class="fw-bold mb-1">Tr·∫ßn Th·ªã B</h6>
          <p class="small text-muted">Java, Backend</p>
          <button class="btn btn-sm btn-outline-primary">Xem b√†i vi·∫øt</button>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card text-center shadow-sm h-100">
        <div class="card-body">
          <img src="https://i.pravatar.cc/100?img=3" class="rounded-circle mb-3">
          <h6 class="fw-bold mb-1">L√™ VƒÉn C</h6>
          <p class="small text-muted">Fullstack</p>
          <button class="btn btn-sm btn-outline-primary">Xem b√†i vi·∫øt</button>
        </div>
      </div>
    </div>
  </div>
</div>



        
  <div class="container my-5">
    <h2 class="mb-4">T·∫•t c·∫£ B√†i Vi·∫øt</h2>
    <div class="row">
      <!-- V√≤ng l·∫∑p hi·ªÉn th·ªã danh s√°ch b√†i vi·∫øt (List Rendering) -->
      <div class="col-md-6 col-lg-4 mb-4" v-for="post in postsStore.posts" :key="post.id">
        <div class="card shadow-sm h-100">
          <!-- Hi·ªÉn th·ªã ·∫£nh (Conditional Rendering) -->
          <img v-if="post.imageUrl" :src="post.imageUrl" class="card-img-top" :alt="post.title" style="height: 200px; object-fit: cover;">
          
          <div class="card-body">
            <!-- Ti√™u ƒë·ªÅ (Template Syntax) -->
            <h5 class="card-title">{{ post.title }}</h5>
            
            <!-- Th√¥ng tin t√≥m t·∫Øt -->
            <p class="card-text text-muted small">T√°c gi·∫£: {{ post.author }}</p>
            <p class="card-text">{{ post.content.substring(0, 100) + '...' }}</p>
            
            <!-- Link chi ti·∫øt b√†i vi·∫øt -->
            <RouterLink
  :to="{ name: 'post-detail', params: { id: post.id } }"
  class="btn btn-sm btn-primary"
  @click="postsStore.increaseView(post.id)"
>
  Xem chi ti·∫øt
</RouterLink>


            <!-- N√∫t X√≥a (Conditional Rendering: Ch·ªâ hi·ªán khi l√† t√°c gi·∫£ - Y2.2) -->
            <button 
                v-if="authStore.isAuthenticated && authStore.currentUser.id === post.userId"
                @click="confirmDelete(post.id)"
                class="btn btn-sm btn-danger ms-2"
            >
                X√≥a
            </button>
          </div>
          <div class="card-footer text-muted small">
            ƒêƒÉng ng√†y: {{ new Date(post.date).toLocaleDateString('vi-VN') }}
          </div>
        </div>
      </div>
      
      
      <!-- Th√¥ng b√°o khi kh√¥ng c√≥ b√†i vi·∫øt -->
      <div v-if="postsStore.posts.length === 0" class="col-12">
        <div class="alert alert-info">Ch∆∞a c√≥ b√†i vi·∫øt n√†o ƒë∆∞·ª£c ƒëƒÉng.</div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { usePostsStore } from '@/stores/posts';
import { useAuthStore } from '@/stores/auth';
import { RouterLink } from 'vue-router'; // C·∫ßn import RouterLink khi s·ª≠ d·ª•ng
const postsStore = usePostsStore();
const authStore = useAuthStore();


const confirmDelete = (postId) => {
    // Kh√¥ng d√πng window.confirm/alert trong m√¥i tr∆∞·ªùng Immersive. D√πng modal custom ho·∫∑c console.log
    if (window.confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a b√†i vi·∫øt n√†y kh√¥ng?')) {
        const result = postsStore.deletePost(postId, authStore.currentUser.id);
        if (!result.success) {
            console.error(result.message);
            // C√≥ th·ªÉ th√™m logic hi·ªÉn th·ªã l·ªói cho ng∆∞·ªùi d√πng n·∫øu c·∫ßn
        }
    }
};
</script>